// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"        // falls du SQLite verwendest -> "sqlite"
  url      = env("DATABASE_URL")
}

enum ReservationStatus {
  confirmed
  canceled
  no_show   // <- statt "no-show"
}

model Reservation {
  id            String             @id
  firstName     String
  name          String
  email         String
  phone         String?
  date          String             // YYYY-MM-DD
  time          String             // HH:mm
  guests        Int
  notes         String?

  status        ReservationStatus  @default(confirmed)
  isWalkIn      Boolean            @default(false)

  createdAt     DateTime           @default(now())
  startTs       DateTime
  endTs         DateTime

  cancelToken   String
  reminderSent  Boolean            @default(false)

  @@index([date, time])
  @@index([email])
}

model Notice {
  id         String   @id
  startTs    DateTime
  endTs      DateTime
  title      String
  message    String
  active     Boolean  @default(true)
  requireAck Boolean  @default(false)

  createdAt  DateTime @default(now())

  @@index([startTs, endTs])
}
